@page "/edit-book"
@page "/edit-book/{id:int}"
@using Microsoft.AspNetCore.Authorization

@attribute [Authorize(Policy = "AdminOnly")]

@inject IBookService BookService


<div class="row col-md-6 offset-3">
    <h3>Add Book</h3>
<EditForm Model="@book" OnSubmit="HandleSubmit" FormName="editBook">
    <div class="row">
            <label>Title</label>
            <InputText @bind-Value="book.Title"></InputText>
    </div>
  
    <div class="row">
            <label>Author</label>
            <InputText @bind-Value="book.Author"></InputText>
    </div>
    
    <div class="row">
            <label>ISBN</label>
            <InputText @bind-Value="book.ISBN"></InputText>
    </div>
    
    <div class="row">
            <label>Genre</label>
            <InputText @bind-Value="book.Genre"></InputText>
    </div>
   
    <div class="row">
            <label>Publisher</label>
            <InputText @bind-Value="book.Publisher"></InputText>
    </div>
    
    <div class="row">
            <label>Publish Date</label>
            <InputDate @bind-Value="book.PublishDate"></InputDate>
    </div>

    <div class="row">
            <label>Quantity Available</label>
            <InputNumber @bind-Value="book.QuantityAvailable"></InputNumber>
    </div>

   <div class="row">
            <label>Description</label>
            <InputText @bind-Value="book.Description"></InputText>
   </div>

    <div class="row mt-3 ">

            <button class="btn btn-primary " type="submit">Save</button>
    </div>

</EditForm>
</div>
@code {
    [Parameter]
    public int Id { get; set; }
    [SupplyParameterFromForm]
    public Book book { get; set; } = new();
    async Task HandleSubmit()
    {
        await BookService.AddBook(book);
    }
}
